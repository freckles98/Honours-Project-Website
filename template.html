<!doctype html>
<html class="no-js" lang="zxx">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Template Matching</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="apple-touch-icon" href="apple-touch-icon.png">
    <!-- Place favicon.ico in the root directory -->

    <link rel="stylesheet" href="plugins/bootstrap/bootstrap.min.css">
    <!-- ThemeFisher Icon -->
    <link rel="stylesheet" href="plugins/themefisher-fonts/themefisher-fonts.css">
    <!-- Light Box -->
    <link rel="stylesheet" href="plugins/magnific-popup/magnific-popup.css">
    <!-- animation css -->
    <link rel="stylesheet" href="plugins/animate/animate.css">
    <!-- slick slider -->
    <link rel="stylesheet" href="plugins/slick/slick.css">

    <!-- Revolution Slider -->
    <link rel="stylesheet" href="css/style.css">

    <style>
      /* Always set the map height explicitly to define the size of the div
       * element that contains the map. */
      #map_canvas {
        height: 100%;
      }
      /* Optional: Makes the sample page fill the window. */
    </style>
    <script src="plugins/modernizr.min.js"></script>
  </head>
  <body>
    <!--[if lt IE 8]>
      <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
    <![endif]-->

  <!-- Loader to display before content Load-->
  <div class="loading">

    <!-- <img src="img/loader.gif" alt=""> -->

    <div class="windows8 loading-position">
      <div class="wBall" id="wBall_1">
        <div class="wInnerBall"></div>
      </div>
      <div class="wBall" id="wBall_2">
        <div class="wInnerBall"></div>
      </div>
      <div class="wBall" id="wBall_3">
        <div class="wInnerBall"></div>
      </div>
      <div class="wBall" id="wBall_4">
        <div class="wInnerBall"></div>
      </div>
      <div class="wBall" id="wBall_5">
        <div class="wInnerBall"></div>
      </div>
    </div>
  </div> 


 <!-- Navigation -section
  =========================-->
<nav class="navbar navbar-fixed-top navigation" >
  <div class="container">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand logo" href="index.html">
        <img src="images/tree-logo.png" alt="">
      </a>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse navbar-ex1-collapse">
      <ul class="nav navbar-nav navbar-right menu">
        <li><a href="index.html">Home</a></li>
        <li><a href="template.html">Template Matching</a></li>
        <li><a href="hough.html">Hough Transform</a></li>
        <li><a href="hausdorff.html">Hausdorff Distance</a></li>
        <!--<li><a href="contact.html">Contact</a></li> -->
      </ul>
    </div><!-- /.navbar-collapse -->
  </div>
</nav>

 <!-- Hero Area -section
  =========================-->
  <header class="hero-area th-fullpage" data-parallax="scroll" data-image-src="images/slider/orchard2.jpg">
    <div class="container">
      <div class="row">
        <div class="col-md-12">
          <h1> <br>
            Template Matching</h1>
        </div>
      </div>
    </div>
  </header>


  <!-- Aims
=========================-->
<section class="clients" data-parallax="scroll" data-image-src="images/Template/tree5.jpg">
  <div class="section">
    <div class="container-fluid">
      <div class="row">
        <div class="col-md-12">
          <div class="title text-center">
            <h2>Project Aims</h2>
          </div>
          <div class="col-md-8 col-md-offset-2 col-lg-8 col-lg-offset-2 padding-0 slider-main">
            <div class="testimonial-slider">
              <div class="item">
                <!-- Slider item -->
                <!-- <div class="col-md-8 col-md-offset-2 col-lg-8 col-lg-offset-2 padding-0"> -->
                <div class="testimonials-area">
                  <!-- <div class="round-shape"></div> -->
                  <h5> Primary aim: To detect planting patterns from aerial footage of orchards using template matching techniques</h5>
                  <br>
                  <br>
                  <h5> Secondary Aim: Extract key parameters about the orchard such as intra-row and inter-row spacing.
                  </h5>
                  
                </div>
                <!-- </div> -->
                <!-- End Slider item -->
              </div>
                <!-- End Slider item -->
              </div>
            </div>
          </div>
        </div>
      </div><!-- /.End row -->
    </div>
  </div>
  
</section>
 <!-- What is TM
  =========================-->
  <section class="case-study">
    <div class="text-center">
      <h2 class="title">What is Template Matching?</h2>
    </div>
    <!-- top section -->
    <div class="case-study-content">
      <div class="container">
        <div class="row">
          <div class="col-md-6">
            <!-- inner sub-title -->
            <div class="content">
              
              <p class="case-description">Template matching is the process of determining the presence and/or position of a smaller  image, called a template, in a larger image. In the case of planting patterns, they are made up of repeating geometric shapes such as squares and triangles. By creating a template of the geometric shapes we can use template matching to determine the planting pattern that is present in the dataset. <br> <br>
					Template matching has 2 issues that must be overcome: rotation and scale. The template is only tested in the size and rotation that it is set to. The system must either detect the rotation of the dataset or test every rotation (which is extremely inefficient). To solve scale the templates must be sized to every scale that we want to test for so either we test detect a number of possible scales or test for every possible scale (inefficient). <br> <br>
					This page will show you how we developed the system to maximise efficiency without compromising on the template matching approach.
				 </p>
             
              <!-- View More Details -->
            </div>
          </div>
          <div class="col-md-6">
            <div class="img-content">
              <img class="img-responsive" src="images/Template/TMExample.png" alt="">
            </div>
          </div>
        </div>
      </div>
    </div>
   
  </section>
  
  
  <!-- Algorithm
  =========================-->

  <section class="case-study">
    <div class="text-center">
      <h2 class="title">Algorithm</h2>
    </div>
    <!-- Case Study Description
      top section -->
    <div class="case-study-content">
      <div class="container">
        <div class="row">
          <div class="col-md-6">
            <!-- inner sub-title -->
            <div class="content">
              
              <p class="case-description">
				<br><br><br>
				To create a system that can solve for both of the aims of the project, a 3 step system was determined. These steps set up the necessary information for the next step while balancing accuracy and efficiency.<br><br>
				<br><b>Step 1</b><br> <br>
				The first stage was parameter extraction for the secondary aims. And to detect scale and rotation parameters that are necessary for the Template Matching algorithm. The dataset is broken up and graphed as multiple sub-images for template matching efficiency and accuracy.<br><br>
				<br><b>Step 2</b><br> <br>
				The second step was the application of the OpenCV template matching algorithm. Which scored each template based on the number of matches and their correlation scores.<br><br>
				<br><b>Step 3</b><br> <br>
				The final step evaluates the scores and penalises certain templates based on their characteristics. Then determine the present pattern and output the detected pattern and parameters.<br><br>
				 </p>
             
              <!-- View More Details -->
              
            </div>
          </div>
          <div class="col-md-6">
            <div class="img-content">
              <img class="img-responsive" src="images/Template/TMFlow.jpg" alt="">
            </div>
          </div>
        </div>
      </div>
    </div>
   
  </section>
  
<!-- Row Detection / Parameter extraction
  =========================-->

  <section class="case-study">
    <div class="text-center">
      <h2 class="title">Parameter Extraction</h2>
    </div>
    <!-- Case Study Description
      top section -->
    <div class="case-study-content">
      <div class="container">
        <div class="row">
          <div class="col-md-6">
            <!-- inner sub-title -->
            <div class="content">
              
              <p class="case-description"> There were 7 parameters that the system attempted to extract: <br><br>
										1) Intra-row spacing: with the use of KD Trees is was successfully extracted. <br><br>
										2) Inter-row spacing: Through KD Trees and points that had lines perpendicular to the rotation it was successfully extracted but with some variance. <br><br>
										3) Tree count: successfully extracted. <br><br>
										4) Corner Tree coordinates: Successfully extracted using min, max x and y values. Does not would on orientations that are a multiple of 90. <br><br>
										5) Road, ditch count: Failed to be detected. <br><br>
										6) Average tree per row: Too much variance failed to be detected. <br><br>
										7) Number of rows: Sometimes successful but very susceptible to noise, was not consistently detected and thus is considered to have failed.
										 </p>
             
              <!-- View More Details -->
              
            </div>
          </div>
          <div class="col-md-6">
            <div class="img-content">
              <img class="img-responsive" src="images/Template/ParamExt1.jpg" alt="">
            </div>
          </div>
        </div>
      </div>
    </div>
	<div class="text-center">
      <h2 class="title">Row Detection</h2>
    </div>
    <!-- Case Study Description
      top section -->
    <div class="case-study-content">
      <div class="container">
        <div class="row">
          <div class="col-md-6">
            <!-- inner sub-title -->
            <div class="content">
              
              <p class="case-description">The system used row detection mainly to determine the rotation parameter for the template matching algorithm. There is an assumption that each dataset has straight lines which allows us to detect a single rotation. <br><br>
									The algorithm iteratively built the row in one direction and then ran again to build it in the other direction. Using KD Trees it pick a point and its nearest neighbour and calculated the angle of the line between them. To build the row it took a KD tree of 5 levels (4 other points) and found which (if any) point creating a line will an angle similar to the angle of the row. If so then that point was added to the row and the process was repeated until that was no longer true. Lines are only considered if they have a minimum of 10 points in them. This allows for us to find noise in the initial guess and not have it affect the final results. Once 10 rows of more that 10 points is detected then it averages their angle to determine the rotation. <br><br>
									You can see in the image where the red dots are lines detected by the algorithm. It does not detect full rows but it does detect enough rows with a length long enough to determine the rotation of the dataset.
									</p>
             
              <!-- View More Details -->
              
            </div>
          </div>
          <div class="col-md-6">
            <div class="img-content">
              <img class="img-responsive" src="images/Template/RowDetection.png" alt="">
            </div>
          </div>
        </div>
      </div>
    </div>
   
  </section>
  
 <!-- Template Gen
  =========================-->

  <section class="case-study">
    <div class="text-center">
      <h2 class="title">Template Generation</h2>
    </div>
    <!-- Case Study Description
      top section -->
    <div class="case-study-content">
      <div class="container">
        <div class="row">
          <div class="col-md-6">
            <!-- inner sub-title -->
            <div class="content">
              
              <p class="case-description"> Template matching is the process of detecting the presence and location of a smaller image, called a template in a larger image. There are two issues that are faced by template matching that need to be solved for and they are: rotation and scale. These issues are solved with the extraction of parameters for this algorithm. <br><br>
				The template matching system had 3 stages to it. The first stage was parameter extraction for the secondary aims. And to detect scale and rotation parameters that are necessary for the Template Matching algorithm. The dataset is broken up and graphed as multiple sub-images for template matching efficiency and accuracy.<br><br>

				The second step was the application of the OpenCV template matching algorithm. Which scored each template based on the number of matches and their correlation scores.<br><br>

				The final step evaluates the scores and penalises certain templates based on their characteristics. Then determine the present pattern and output the detected pattern and parameters.<br><br>
				 </p>
             
              <!-- View More Details -->
              
            </div>
          </div>
          <div class="col-md-6">
            <div class="img-content">
              <img class="img-responsive" src="images/home/TMFlow.jpg" alt="">
            </div>
          </div>
        </div>
      </div>
    </div>
   
  </section>
  
 <!-- Scoring
  =========================-->

  <section class="case-study">
    <div class="text-center">
      <h2 class="title">Scoring</h2>
    </div>
    <!-- Case Study Description
      top section -->
    <div class="case-study-content">
      <div class="container">
        <div class="row">
          <div class="col-md-6">
            <!-- inner sub-title -->
            <div class="content">
              
              <p class="case-description"> Template matching is the process of detecting the presence and location of a smaller image, called a template in a larger image. There are two issues that are faced by template matching that need to be solved for and they are: rotation and scale. These issues are solved with the extraction of parameters for this algorithm. <br><br>
				The template matching system had 3 stages to it. The first stage was parameter extraction for the secondary aims. And to detect scale and rotation parameters that are necessary for the Template Matching algorithm. The dataset is broken up and graphed as multiple sub-images for template matching efficiency and accuracy.<br><br>

				The second step was the application of the OpenCV template matching algorithm. Which scored each template based on the number of matches and their correlation scores.<br><br>

				The final step evaluates the scores and penalises certain templates based on their characteristics. Then determine the present pattern and output the detected pattern and parameters.<br><br>
				 </p>
             
              <!-- View More Details -->
              
            </div>
          </div>
          <div class="col-md-6">
            <div class="img-content">
              <img class="img-responsive" src="images/home/TMFlow.jpg" alt="">
            </div>
          </div>
        </div>
      </div>
    </div>
   
  </section>
  
  
  <!-- Problems
  =========================-->

  <section class="case-study">
    <div class="text-center">
      <h2 class="title">Issues</h2>
    </div>
    <!-- Case Study Description
      top section -->
    <div class="case-study-content">
      <div class="container">
        <div class="row">
          <div class="col-md-6">
            <!-- inner sub-title -->
            <div class="content">
              
              <p class="case-description">It was necessary to remove the quincunx template from the program because it always matches with square and rectangle patterns. Because of how the row detection algorithm works and how it orientates the image, the quincunx pattern template becomes a plus sign that matches extremely well with templates containing 90 degree angles. With the quincunx pattern always being detected and often outperforming the actual pattern present.
						<br><br>
						This is a problem that intensity based template matching has when determining details.

						</p>
             
              <!-- View More Details -->
              
            </div>
          </div>
          <div class="col-md-6">
            <div class="img-content">
              <img class="img-responsive" src="images/home/TemplateMatching/TM1.jpg" alt="">
            </div>
          </div>
        </div>
      </div>
    </div>
   
  </section>
  
   <!-- Conlcusion
  =========================-->
<section class="clients" data-parallax="scroll" data-image-src="images/slider/orchard2.jpg">
  <div class="section">
    <div class="container-fluid">
      <div class="row">
        <div class="col-md-12">
          <div class="title text-center">
            <h2>Conclusions</h2>
          </div>
          <div class="col-md-8 col-md-offset-2 col-lg-8 col-lg-offset-2 padding-0 slider-main">
            <div class="testimonial-slider">
              <div class="item">
                <!-- Slider item -->
                <!-- <div class="col-md-8 col-md-offset-2 col-lg-8 col-lg-offset-2 padding-0"> -->
                <div class="testimonials-area">
                  <!-- <div class="round-shape"></div> -->
				  <h5> Template matching was successful in determing the pattern present both in real world and idealised data. Provided the straight row assumptions are met.
				  </h5>
				  <br>
				  <br>
                  <h5> Template matching is a good approach to this problem both in terms of accuracy and effciency.
				  </h5>
				  <br>
				  <br>
				  <h5> One can implement more complex row detection techniques and improve of template matching to increase the accuracy of the solution especially with noise data
				  </h5>
                  
                </div>
                <!-- </div> -->
                <!-- End Slider item -->
              </div>
                <!-- End Slider item -->
              </div>
            </div>
          </div>
        </div>
      </div><!-- /.End row -->
    </div>
  </div>
  </section>
  
  

    <footer class="footer">
        <div class="container">
            <div class="row">
                <div class="container">
                    <div class="footer-top">
                        <div class="col-md-4">
                            <!-- footer About section
                            ========================== -->
                            <div class="footer-about">
                                <h3 class="footer-title">About</h3>
                                <p>A team of 3 honours students <br>
                                    soving the problem of orchard structure <br>
                                    classification for the company Aerobotics. <br>
                                    Computer Science Honours 2021.</p>
                            </div>
                        </div>
						<div class="col-md-4">
                            <!-- footer Address section
                            ========================== -->
                            <div class="footer-address">
                                <h3 class="footer-title">Developer</h3>
                                <p>Template Matching solution developed by Jonathon Everatt.
								<br>
								https://github.com/KarmaZA
								<br>
								https://www.linkedin.com/in/jonathon-everatt-54049120a/</p>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <!-- footer Address section
                            ========================== -->
                            <div class="footer-address">
                                <h3 class="footer-title">Address</h3>
                                <p>Computer Science Department <br>
									University of Cape Town <br>
									Private Bag X3 <br>
									Rondebosch</p>
                            </div>
                        </div>
                    </div>
                    <div class="text-center">
                        <div class="col-md-12">
                            <div class="copyright">
                                <p>&copy; 2013-2017 All rights reserved. <br>
                                    Design and Developed By Jonathon Everatt. <br>
									Template from https://themefisher.com</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </footer>


    <script src="plugins/jquery.min.js"></script>

    <script src="plugins/bootstrap/bootstrap.min.js"></script>
    <!-- slick slider -->
    <script src="plugins/slick/slick.min.js"></script>
    <!-- filter -->
    <script src="plugins/filterizr/jquery.filterizr.min.js"></script>
    <!-- Lightbox -->
    <script src="plugins/magnific-popup/jquery.magnific-popup.min.js"></script>
    <!-- Parallax -->
    <script src="plugins/parallax.min.js"></script>
    <!-- Video -->
    <script src="plugins/jquery.vide.js"></script>
    <!-- google map -->
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBu5nZKbeK-WHQ70oqOWo-_4VmwOwKP9YQ"></script>
    <script src="plugins/google-map/gmap.js"></script>

    <script src="js/script.js"></script>
    </body>

    </html>
